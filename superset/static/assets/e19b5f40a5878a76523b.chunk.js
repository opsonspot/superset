(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[1497],{943323:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var o=r(667294),n=r(211965);function a(e,t){class r extends o.Component{constructor(e){super(e),this.container=void 0,this.setContainerRef=this.setContainerRef.bind(this)}componentDidMount(){this.execute()}componentDidUpdate(){this.execute()}componentWillUnmount(){this.container=void 0,null!=t&&t.componentWillUnmount&&t.componentWillUnmount.bind(this)()}setContainerRef(e){this.container=e}execute(){this.container&&e(this.container,this.props)}render(){const{id:e,className:t}=this.props;return(0,n.tZ)("div",{ref:this.setContainerRef,id:e,className:t})}}const a=r;return e.displayName&&(a.displayName=e.displayName),e.propTypes&&(a.propTypes={...a.propTypes,...e.propTypes}),e.defaultProps&&(a.defaultProps=e.defaultProps),r}},67869:(e,t,r)=>{"use strict";r.d(t,{E8:()=>T,CW:()=>d.Z,kI:()=>o,A5:()=>n.Z,Gz:()=>h.Z,Ys:()=>m.Z,$5:()=>p.Z,Dg:()=>g.Z,XF:()=>f.Z,gE:()=>a.Z,yE:()=>y.Z,eL:()=>s.Z,zR:()=>u.Z,UM:()=>v.Z,Bs:()=>Z.Z,T8:()=>l.Z,Xs:()=>_.Xs,Ag:()=>_.Ag,Zf:()=>C.Zf,Gh:()=>C.Gh,B_:()=>i.Z,Qg:()=>C.Qg,j3:()=>c.Z,l:()=>_.ZP,oo:()=>C.oo,vq:()=>C.vq});var o=r(328062),n=r(997466),a=r(815226),i=r(281545),s=r(758586),c=r(45511),l=r(902995),u=r(598195),d=r(727965),h=r(786698),m=r(269224),p=r(977781),g=r(364236),f=r(765445),y=r(836361),v=r(132),Z=r(231225),C=r(25130),_=r(478161);const T="#00A699"},208608:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var o=r(662761);function n(e,t,r){let o=e,n=t(o);for(;!r(n);){if(o-=1,o<0){o=e;break}n=t(o)}return o}function a(e){const{idealFontSize:t,maxWidth:r,maxHeight:a,style:i,...s}=e;let c;if(null!=t)c=t;else{if(null==a)throw new Error("You must specify at least one of maxHeight or idealFontSize");c=Math.floor(a)}function l(e){return(0,o.Z)({...s,style:{...i,fontSize:`${e}px`}})}return null!=r&&(c=n(c,l,(e=>e.width>0&&e.width<=r))),null!=a&&(c=n(c,l,(e=>e.height>0&&e.height<=a))),c}},902445:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var o=r(161888),n=r(966529),a=r(610660);function i(e,t){const{texts:r,className:i,style:s,container:c}=e,l=new Map;let u,d;l.set("",{height:0,width:0});const h=r.map((e=>{if(l.has(e))return l.get(e);u||(d=n.Y.createInContainer(c),u=n.S.createInContainer(d)),(0,a.Z)(u,{className:i,style:s,text:e});const r=(0,o.Z)(u,t);return l.set(e,r),r}));return d&&u&&setTimeout((()=>{n.S.removeFromContainer(d),n.Y.removeFromContainer(c)}),500),h}},662761:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var o=r(610660),n=r(161888),a=r(966529);function i(e,t){const{text:r,className:i,style:s,container:c}=e;if(0===r.length)return{height:0,width:0};const l=a.Y.createInContainer(c),u=a.S.createInContainer(l);(0,o.Z)(u,{className:i,style:s,text:r});const d=(0,n.Z)(u,t);return setTimeout((()=>{a.S.removeFromContainer(l),a.Y.removeFromContainer(c)}),500),d}},966529:(e,t,r)=>{"use strict";r.d(t,{Y:()=>a,S:()=>i});class o{constructor(e){this.activeNodes=new Map,this.factoryFn=void 0,this.factoryFn=e}createInContainer(e=document.body){if(this.activeNodes.has(e)){const t=this.activeNodes.get(e);return t.counter+=1,t.node}const t=this.factoryFn();return e.append(t),this.activeNodes.set(e,{counter:1,node:t}),t}removeFromContainer(e=document.body){if(this.activeNodes.has(e)){const t=this.activeNodes.get(e);t.counter-=1,0===t.counter&&(e.removeChild(t.node),this.activeNodes.delete(e))}}}const n="http://www.w3.org/2000/svg",a=new o((function(){const e=document.createElementNS(n,"svg");return e.style.position="absolute",e.style.top="-100%",e.style.left="-100%",e.style.width="0",e.style.height="0",e.style.opacity="0",e.style.pointerEvents="none",e})),i=new o((function(){return document.createElementNS(n,"text")}))},161888:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const o={height:20,width:100};function n(e,t=o){const{width:r,height:n}=e.getBBox?e.getBBox():t;return{height:Math.ceil(n),width:Math.ceil(r)}}},610660:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const o=["font","fontWeight","fontStyle","fontSize","fontFamily","letterSpacing"];function n(e,{className:t,style:r={},text:n}={}){const a=e;return a.textContent!==n&&(a.textContent=void 0===n?null:n),a.getAttribute("class")!==t&&a.setAttribute("class",null!=t?t:""),a.style.removeProperty("font"),a.style.removeProperty("font-weight"),a.style.removeProperty("font-style"),a.style.removeProperty("font-size"),a.style.removeProperty("font-family"),a.style.removeProperty("letter-spacing"),o.filter((e=>void 0!==r[e]&&null!==r[e])).forEach((e=>{a.style[e]=`${r[e]}`})),a}},715208:(e,t,r)=>{"use strict";r.d(t,{d:()=>n});var o=r(667294);const n=e=>{const t=(0,o.useRef)(!1);(0,o.useEffect)((()=>{t.current?e():t.current=!0}),[e])}},178243:(e,t,r)=>{"use strict";r.d(t,{W:()=>n});var o=r(667294);function n(e){const t=(0,o.useRef)(null),[r,n]=(0,o.useState)(!1),a=e=>{const[t]=e;n(t.intersectionRatio<1)};return(0,o.useEffect)((()=>{const r=new IntersectionObserver(a,e),o=t.current;return o&&r.observe(o),()=>{o&&r.unobserve(o)}}),[t,e]),[t,r]}},751794:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var o=r(667294);const n=()=>{const[e,t]=(0,o.useState)(0),[r,n]=(0,o.useState)(!1),a=(0,o.useRef)(null),i=(0,o.useRef)(null);return(0,o.useLayoutEffect)((()=>{var e;const r=()=>{const e=a.current;if(!e)return;const r=i.current,{scrollWidth:o,clientWidth:s,childNodes:c}=e;if(o>s){const e=6,o=(null==r?void 0:r.offsetWidth)||0,a=s-e,i=c.length;let l=0,u=0;for(let e=0;e<i;e+=1)a-l-o<=0&&(u+=1),l+=c[e].offsetWidth;i>1&&u?(n(!0),t(u)):(n(!1),t(1))}else n(!1),t(0)},o=new ResizeObserver(r),s=null==(e=a.current)?void 0:e.parentElement;return s&&o.observe(s),r(),()=>{o.disconnect()}}),[i.current]),[a,i,e,r]}},740174:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AnnotationOpacity:()=>De.TJ,AnnotationSourceType:()=>De.u$,AnnotationStyle:()=>De.QW,AnnotationType:()=>De.JJ,ApiLegacy:()=>o,ApiV1:()=>n,AppSection:()=>St.Tr,AxisType:()=>St.we,BRAND_COLOR:()=>et.E8,Behavior:()=>St.cg,CategoricalAirbnb:()=>et.CW,CategoricalColorNamespace:()=>et.kI,CategoricalColorScale:()=>et.A5,CategoricalD3:()=>et.Gz,CategoricalEcharts:()=>et.Ys,CategoricalGoogle:()=>et.$5,CategoricalLyft:()=>et.Dg,CategoricalPreset:()=>et.XF,CategoricalScheme:()=>et.gE,CategoricalSuperset:()=>et.yE,ChartClient:()=>dt,ChartDataProvider:()=>Dt,ChartFrame:()=>bt,ChartLabel:()=>St.Df,ChartMetadata:()=>ht.Z,ChartPlugin:()=>mt.Z,ChartProps:()=>pt.Z,ChartPropsConfig:()=>pt.ChartPropsConfig,ColorScheme:()=>et.eL,ColorSchemeRegistry:()=>et.zR,ComparisonType:()=>I.wj,ContributionType:()=>M.YC,CtasEnum:()=>M.WN,CurrencyFormatter:()=>Ht.Z,DEFAULT_D3_FORMAT:()=>Pe.A,DEFAULT_METRICS:()=>b.BH,DTTM_ALIAS:()=>de.W3,DataMaskType:()=>X.gT,DatasourceKey:()=>ve.Z,DatasourceType:()=>b.i9,EXTRA_FORM_DATA_APPEND_KEYS:()=>de.Ci,EXTRA_FORM_DATA_OVERRIDE_EXTRA_KEYS:()=>de.fn,EXTRA_FORM_DATA_OVERRIDE_KEYS:()=>de.Ay,EXTRA_FORM_DATA_OVERRIDE_REGULAR_KEYS:()=>de.NU,EXTRA_FORM_DATA_OVERRIDE_REGULAR_MAPPINGS:()=>de.gn,EmotionCacheProvider:()=>tt.zo,ErrorTypeEnum:()=>M.C5,ExtensibleFunction:()=>a.Z,FAST_DEBOUNCE:()=>Wt.o,FeatureFlag:()=>A.TT,GenericDataType:()=>k.Z,LOCAL_PREFIX:()=>Le.D,NO_TIME_RANGE:()=>de.vM,NativeFilterType:()=>X.BE,NumberFormats:()=>Ae.default,NumberFormatter:()=>Fe.Z,NumberFormatterRegistry:()=>be.Z,OverwritePolicy:()=>c.r,PREVIEW_TIME:()=>ke.F,PREVIEW_VALUE:()=>Fe.G,PandasAxis:()=>D,Plugin:()=>i.Z,Preset:()=>s.Z,QueryMode:()=>L.n,QueryState:()=>M.Tb,Registry:()=>c.Z,RegistryWithDefaultKey:()=>l.Z,RollingType:()=>I.su,SLOW_DEBOUNCE:()=>Wt.M,SafeMarkdown:()=>Qt.Z,SequentialCommon:()=>et.UM,SequentialD3:()=>et.Bs,SequentialScheme:()=>et.T8,SharedLabelColor:()=>et.Xs,SharedLabelColorSource:()=>et.Ag,SuperChart:()=>yt.Z,SupersetApiError:()=>Se.P,SupersetApiErrorType:()=>Se.M,SupersetClient:()=>te.Z,SupersetClientClass:()=>re.Z,ThemeProvider:()=>tt.f6,TimeFormats:()=>Le.default,TimeFormatter:()=>ke.Z,TimeGranularity:()=>qe.A,TooltipFrame:()=>It,TooltipTable:()=>Ut,TypedRegistry:()=>u.Z,WithLegend:()=>Mt,__hack_reexport_AdvancedAnalytics:()=>I.ZP,__hack_reexport_Column:()=>R.ZP,__hack_reexport_Dashboard:()=>X.ZP,__hack_reexport_Datasource:()=>b.ZP,__hack_reexport_Metric:()=>w.ZP,__hack_reexport_Query:()=>M.ZP,__hack_reexport_QueryFormData:()=>L.Z,__hack_reexport_QueryResponse:()=>k.C,__hack_reexport_Time:()=>K,__hack_reexport_chart_Base:()=>St.ZP,__hack_reexport_chart_QueryResponse:()=>Ft,__hack_reexport_chart_TransformFunction:()=>At,__hack_reexport_connection:()=>oe,__hack_reexport_dimension:()=>Je,__hack_reexport_jed:()=>V,__hack_reexport_translation:()=>J,addAlpha:()=>et.Zf,addLocaleData:()=>H.oK,addTranslation:()=>H.Zt,addTranslations:()=>H.hk,buildCustomFormatters:()=>Vt.zn,buildQueryContext:()=>he.Z,buildQueryObject:()=>me.Z,callApi:()=>ee.Z,chartLabelExplanations:()=>St.t$,chartLabelWeight:()=>St.eH,computeMaxFontSize:()=>Xe.Z,concludedQueryStateList:()=>M.yv,configure:()=>H.jQ,convertFilter:()=>pe.Z,convertKeysToCamelCase:()=>d.Z,createD3NumberFormatter:()=>Re.Z,createD3TimeFormatter:()=>Oe.Z,createDurationFormatter:()=>Ee.Z,createEmotionCache:()=>tt.S9,createLoadableRenderer:()=>gt.Z,createMultiFormatter:()=>Ue.Z,createSiAtMostNDigitFormatter:()=>Ne,createSmartNumberFormatter:()=>Me.Z,css:()=>tt.iv,defineSharedModule:()=>ne.vO,defineSharedModules:()=>ne.YW,denormalizeTimestamp:()=>je,emotionCache:()=>tt.Yi,ensureIsArray:()=>h.Z,ensureIsInt:()=>m.Z,evalExpression:()=>zt.f,extractQueryFields:()=>_e.Z,extractTimegrain:()=>ge.Z,finestTemporalGrainFormatter:()=>Ye.Z,formatNumber:()=>xe.uf,formatTime:()=>Ie.mr,formatTimeRange:()=>Ie.ns,getAnalogousColors:()=>et.Gh,getCategoricalSchemeRegistry:()=>et.B_,getChartBuildQueryRegistry:()=>lt.Z,getChartComponentRegistry:()=>vt.Z,getChartControlPanelRegistry:()=>Zt.Z,getChartMetadataRegistry:()=>ut.Z,getChartTransformPropsRegistry:()=>Ct.Z,getColumnLabel:()=>fe.Z,getContrastingColor:()=>et.Qg,getCurrencySymbol:()=>Ht.j,getCustomFormatter:()=>Vt.So,getExtensionsRegistry:()=>Yt.I,getMetricLabel:()=>ye.Z,getMultipleTextDimensions:()=>$e.Z,getNumberFormatter:()=>xe.JB,getNumberFormatterRegistry:()=>xe.ZP,getSelectedText:()=>S.Z,getSequentialSchemeRegistry:()=>et.j3,getSharedLabelColor:()=>et.l,getTextDimension:()=>Ge.Z,getTimeFormatter:()=>Ie.bt,getTimeFormatterForGranularity:()=>Ie.uh,getTimeFormatterRegistry:()=>Ie.ZP,getTimeRangeFormatter:()=>Ie.Rg,getValueFormatter:()=>Vt.kZ,getXAxisColumn:()=>Te.Bw,getXAxisLabel:()=>Te.M8,hexToRgb:()=>et.oo,initFeatureFlags:()=>A.fG,isAdhocColumn:()=>R.GA,isAdhocMetricSQL:()=>w.q5,isAdhocMetricSimple:()=>w.nX,isBinaryAdhocFilter:()=>E.kC,isBinaryOperator:()=>N.VU,isDefined:()=>p.Z,isEqualArray:()=>f.Z,isEventAnnotationLayer:()=>De.pD,isFeatureEnabled:()=>A.cr,isFilterDivider:()=>X.nY,isFormulaAnnotationLayer:()=>De.x5,isFreeFormAdhocFilter:()=>E.jz,isIntervalAnnotationLayer:()=>De.Ry,isNativeFilter:()=>X.kI,isNativeFilterWithDataMask:()=>X.S0,isPhysicalColumn:()=>R.s9,isPostProcessingAggregation:()=>O,isPostProcessingBoxplot:()=>U,isPostProcessingCompare:()=>q,isPostProcessingContribution:()=>W,isPostProcessingCum:()=>j,isPostProcessingDiff:()=>Y,isPostProcessingPivot:()=>Q,isPostProcessingProphet:()=>z,isPostProcessingResample:()=>$,isPostProcessingRolling:()=>B,isPostProcessingSort:()=>G,isProbablyHTML:()=>x.Kv,isQueryFormColumn:()=>R.Gk,isQueryFormMetric:()=>w.I0,isRecordAnnotationResult:()=>De.$c,isRequired:()=>g.Z,isSavedMetric:()=>w.AG,isSetAdhocFilter:()=>E.VK,isSetOperator:()=>N.XA,isSimpleAdhocFilter:()=>E.Ki,isTableAnnotationLayer:()=>De.mn,isTimeseriesAnnotationLayer:()=>De.nl,isTimeseriesAnnotationResult:()=>De.b4,isUnaryAdhocFilter:()=>E._l,isUnaryOperator:()=>N.CW,isValidExpression:()=>zt.$,isXAxisSet:()=>Te.SR,jsx:()=>tt.tZ,keyframes:()=>tt.F4,legacyValidateInteger:()=>rt.Z,legacyValidateNumber:()=>ot.Z,logging:()=>Z.Z,lruCache:()=>T,makeApi:()=>ce.Z,makeSingleton:()=>y.Z,mergeMargin:()=>He,normalizeOrderBy:()=>Ze.Z,normalizeTimeColumn:()=>Ce.T,normalizeTimestamp:()=>Be.Z,parseLength:()=>Ve.Z,promiseTimeout:()=>v,reactify:()=>ft.Z,removeDuplicates:()=>C.Z,removeHTMLTags:()=>x.ZU,reset:()=>ne.mc,resetTranslation:()=>H.sq,rgbToHex:()=>et.vq,runningQueryStateList:()=>M.sn,safeHtmlSpan:()=>x.Ul,sanitizeHtml:()=>x.Z6,sanitizeHtmlIfNeeded:()=>x.T4,seed:()=>F.D,seedRandom:()=>F.b,setD3Format:()=>xe.KF,smartDateDetailedFormatter:()=>Qe.Z,smartDateFormatter:()=>We.Z,smartDateVerboseFormatter:()=>ze.Z,styled:()=>tt.iK,supersetTheme:()=>tt.K6,t:()=>H.t,testQuery:()=>M.Qn,testQueryResponse:()=>M.pY,testQueryResults:()=>M.eh,tn:()=>H.tn,truncationCSS:()=>Kt.B,typedMemo:()=>P.l,useCSSTextTruncation:()=>Kt.Z,useChangeEffect:()=>Bt.S,useComponentDidMount:()=>jt.J,useComponentDidUpdate:()=>qt.d,useElementOnScreen:()=>Gt.W,usePrevious:()=>$t.D,useTheme:()=>tt.Fg,useTruncation:()=>Xt.Z,validateInteger:()=>nt,validateMapboxStylesUrl:()=>ct.Z,validateMaxValue:()=>st.Z,validateNonEmpty:()=>it.Z,validateNumber:()=>at.Z,withTheme:()=>tt.Zz});var o={};r.r(o),r.d(o,{__hack_reexport_query_api_legacy:()=>se,getDatasourceMetadata:()=>ie,getFormData:()=>ae});var n={};r.r(n),r.d(n,{default:()=>ue,getChartData:()=>le});var a=r(454732),i=r(791189),s=r(746449),c=r(590537),l=r(929243),u=r(653652),d=r(978036),h=r(355786),m=r(777675),p=r(237731),g=r(549714),f=r(201111),y=r(601875);function v(e,t){return new Promise((r=>{setTimeout((()=>{r(e())}),t)}))}var Z=r(68492),C=r(274765);class _{constructor(e){if(this.cache=void 0,this.capacity=void 0,e<1)throw new Error("The capacity in LRU must be greater than 0.");this.capacity=e,this.cache=new Map}has(e){return this.cache.has(e)}get(e){if("string"!=typeof e)throw new TypeError("The LRUCache key must be string.");if(this.cache.has(e)){const t=this.cache.get(e);return this.cache.delete(e),this.cache.set(e,t),t}}set(e,t){if("string"!=typeof e)throw new TypeError("The LRUCache key must be string.");this.cache.size>=this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(e,t)}clear(){this.cache.clear()}get size(){return this.cache.size}}function T(e=100){return new _(e)}var D,S=r(450523),A=r(593185),F=r(170406),P=r(126635),x=r(332103),b=r(46078),R=r(472813),E=r(46306),w=r(62446),N=r(631612),M=r(343716),L=r(920620),k=r(88889),I=r(662363);function O(e){return"aggregation"===(null==e?void 0:e.operation)}function U(e){return"boxplot"===(null==e?void 0:e.operation)}function W(e){return"contribution"===(null==e?void 0:e.operation)}function Q(e){return"pivot"===(null==e?void 0:e.operation)}function z(e){return"prophet"===(null==e?void 0:e.operation)}function Y(e){return"diff"===(null==e?void 0:e.operation)}function B(e){return"rolling"===(null==e?void 0:e.operation)}function j(e){return"cum"===(null==e?void 0:e.operation)}function q(e){return"compare"===(null==e?void 0:e.operation)}function G(e){return"sort"===(null==e?void 0:e.operation)}function $(e){return"resample"===(null==e?void 0:e.operation)}!function(e){e[e.Row=0]="Row",e[e.Column=1]="Column"}(D||(D={}));var X=r(10916);const K={};var H=r(61988);const V={},J={};var ee=r(197065),te=r(431069),re=r(899619);const oe={};var ne=r(581847);function ae({client:e=te.Z,sliceId:t,overrideFormData:r,requestConfig:o}){const n=e.get({endpoint:`/api/v1/form_data/?slice_id=${t}`,...o}).then((({json:e})=>e));return r?n.then((e=>({...e,...r}))):n}function ie({client:e=te.Z,datasourceKey:t,requestConfig:r}){return e.get({endpoint:`/woodfrog/fetch_datasource_metadata?datasourceKey=${t}`,...r}).then((e=>e.json))}const se={};var ce=r(522102);const le=(0,ce.Z)({method:"POST",endpoint:"/api/v1/chart/data"}),ue={getChartData:le};var de=r(5364),he=r(861654),me=r(365946),pe=r(478483),ge=r(705031),fe=r(310581),ye=r(956652),ve=r(667706),Ze=r(882028),Ce=r(678444),_e=r(569363),Te=r(111146),De=r(534804),Se=r(818014),Ae=r(645636),Fe=r(777809),Pe=r(343230),xe=r(767190),be=r(218212),Re=r(643851),Ee=r(775430),we=r(516722);function Ne(e={}){const{description:t,n:r=3,id:o,label:n}=e,a=(0,we.WU)(`.${r}s`);return new Fe.Z({description:t,formatFunc:e=>{const t=a(e);return t.slice(-1)<"A"?parseFloat(t).toString():t},id:null!=o?o:`si_at_most_${r}_digit`,label:null!=n?n:`SI with at most ${r} significant digits`})}var Me=r(184986),Le=r(642846),ke=r(269244),Ie=r(751115),Oe=r(800069),Ue=r(425778),We=r(778900),Qe=r(662720),ze=r(740962),Ye=r(47249),Be=r(588484);function je(e){const t=e.match(Be.t);return t?`${t[1]}T${t[2]}`:e}var qe=r(918010),Ge=r(662761),$e=r(902445),Xe=r(208608);function Ke(e,t=0,r=0){return Number.isNaN(t)||null===t?r:Number.isNaN(r)||null===r?t:e(t,r)}function He(e={},t={},r="expand"){const{top:o,left:n,bottom:a,right:i}=e,s="expand"===r?Math.max:Math.min;return{bottom:Ke(s,a,t.bottom),left:Ke(s,n,t.left),right:Ke(s,i,t.right),top:Ke(s,o,t.top)}}var Ve=r(80644);const Je={};var et=r(67869),tt=r(751995),rt=r(375294),ot=r(799298);function nt(e){return!("string"==typeof e&&e.trim().length>0&&Number.isInteger(Number(e.trim()))||"number"==typeof e&&Number.isInteger(e))&&(0,H.t)("is expected to be an integer")}var at=r(300872),it=r(895826),st=r(274029),ct=r(450431),lt=r(719427),ut=r(311064);class dt{constructor(e={}){this.client=void 0;const{client:t=te.Z}=e;this.client=t}loadFormData(e,t){return"sliceId"in e?this.client.get({endpoint:`/api/v1/form_data/?slice_id=${e.sliceId}`,...t}).then((e=>e.json)).then((t=>({...t,...e.formData}))):e.formData?Promise.resolve(e.formData):Promise.reject(new Error("At least one of sliceId or formData must be specified"))}async loadQueryData(e,t){const{viz_type:r}=e,o=(0,ut.Z)(),n=(0,lt.Z)();if(o.has(r)){var a;const{useLegacyApi:i}=o.get(r),s=null!=(a=await n.get(r))?a:()=>e,c=i?{endpoint:"/woodfrog/explore_json/",postPayload:{form_data:s(e)},...t}:{endpoint:"/api/v1/chart/data",jsonPayload:{query_context:s(e)},...t};return this.client.post(c).then((e=>Array.isArray(e.json)?e.json:[e.json]))}return Promise.reject(new Error(`Unknown chart type: ${r}`))}loadDatasource(e,t){return this.client.get({endpoint:`/woodfrog/fetch_datasource_metadata?datasourceKey=${e}`,...t}).then((e=>e.json))}loadAnnotation(e){return(0,p.Z)(e.sourceType)?Promise.reject(new Error("This feature is not implemented yet.")):Promise.resolve({})}loadAnnotations(e){return Array.isArray(e)&&e.length>0?Promise.all(e.map((e=>this.loadAnnotation(e)))).then((t=>e.reduce(((e,r,o)=>{const n=e;return n[r.name]=t[o],n}),{}))):Promise.resolve({})}loadChartData(e){return this.loadFormData(e).then((e=>Promise.all([this.loadAnnotations(e.annotation_layers),this.loadDatasource(e.datasource),this.loadQueryData(e)]).then((([t,r,o])=>({annotationData:t,datasource:r,formData:e,queriesData:o})))))}}var ht=r(848805),mt=r(884912),pt=r(709330),gt=r(389453),ft=r(943323),yt=r(888274),vt=r(354085),Zt=r(837687),Ct=r(674464),_t=r(667294);class Tt extends _t.PureComponent{constructor(e){super(e),this.chartClient=void 0,this.handleFetchData=()=>{const{loadDatasource:e,formDataRequestOptions:t,datasourceRequestOptions:r,queryRequestOptions:o}=this.props;this.setState({status:"loading"},(()=>{try{this.chartClient.loadFormData(this.extractSliceIdAndFormData(),t).then((t=>Promise.all([e?this.chartClient.loadDatasource(t.datasource,r):Promise.resolve(void 0),this.chartClient.loadQueryData(t,o)]).then((([e,r])=>({datasource:e,formData:t,queriesData:r}))))).then(this.handleReceiveData).catch(this.handleError)}catch(e){this.handleError(e)}}))},this.handleReceiveData=e=>{const{onLoaded:t}=this.props;t&&t(e),this.setState({payload:e,status:"loaded"})},this.handleError=e=>{const{onError:t}=this.props;t&&t(e),this.setState({error:e,status:"error"})},this.state={status:"uninitialized"},this.chartClient=new dt({client:e.client})}componentDidMount(){this.handleFetchData()}componentDidUpdate(e){const{formData:t,sliceId:r}=this.props;t===e.formData&&r===e.sliceId||this.handleFetchData()}extractSliceIdAndFormData(){const{formData:e,sliceId:t}=this.props;return e?{formData:e}:{sliceId:t}}render(){const{children:e}=this.props,{status:t,payload:r,error:o}=this.state;switch(t){case"loading":return e({loading:!0});case"loaded":return e({payload:r});case"error":return e({error:o});default:return null}}}const Dt=Tt;var St=r(616355);const At={},Ft={};var Pt=r(211965);function xt(e){return(0,p.Z)(e)&&"number"==typeof e}class bt extends _t.PureComponent{render(){const{contentWidth:e,contentHeight:t,width:r,height:o,renderContent:n}=this.props,a=xt(e)&&e>r,i=xt(t)&&t>o;return a||i?(0,Pt.tZ)("div",{style:{height:o,overflowX:a?"auto":"hidden",overflowY:i?"auto":"hidden",width:r}},n({height:Math.max(null!=t?t:0,o),width:Math.max(null!=e?e:0,r)})):n({height:o,width:r})}}bt.defaultProps={renderContent(){}};var Rt=r(949302);const Et={display:"flex",flexGrow:0,flexShrink:0,order:-1},wt={flexBasis:"auto",flexGrow:1,flexShrink:1,position:"relative"};class Nt extends _t.PureComponent{getContainerDirection(){const{position:e}=this.props;return"left"===e?"row":"right"===e?"row-reverse":"bottom"===e?"column-reverse":"column"}getLegendJustifyContent(){const{legendJustifyContent:e,position:t}=this.props;return e||("left"===t||"right"===t?"flex-start":"flex-end")}render(){const{className:e,debounceTime:t,width:r,height:o,position:n,renderChart:a,renderLegend:i}=this.props,s="left"===n||"right"===n,c={display:"flex",flexDirection:this.getContainerDirection(),height:o,width:r},l={...wt};s?l.width=0:l.height=0;const u=s?"column":"row",d={...Et,flexDirection:u,justifyContent:this.getLegendJustifyContent()};return(0,Pt.tZ)("div",{className:`with-legend ${e}`,style:c},i&&(0,Pt.tZ)("div",{className:"legend-container",style:d},i({direction:u})),(0,Pt.tZ)("div",{className:"main-container",style:l},(0,Pt.tZ)(Rt.Z,{debounceTime:t},(e=>e.width>0&&e.height>0?a(e):null))))}}Nt.defaultProps={className:"",height:"auto",position:"top",width:"auto"};const Mt=Nt,Lt={padding:8};class kt extends _t.PureComponent{render(){const{className:e,children:t}=this.props;return(0,Pt.tZ)("div",{className:e,style:Lt},t)}}kt.defaultProps={className:""};const It=kt,Ot={paddingLeft:8,textAlign:"right"};class Ut extends _t.PureComponent{render(){const{className:e,data:t}=this.props;return(0,Pt.tZ)("table",{className:e},(0,Pt.tZ)("tbody",null,t.map((({key:e,keyColumn:t,keyStyle:r,valueColumn:o,valueStyle:n})=>(0,Pt.tZ)("tr",{key:e},(0,Pt.tZ)("td",{style:r},null!=t?t:e),(0,Pt.tZ)("td",{style:n?{...Ot,...n}:Ot},o))))))}}Ut.defaultProps={className:"",data:[]};var Wt=r(668122),Qt=r(178186),zt=r(760524),Yt=r(175049),Bt=r(28291),jt=r(504756),qt=r(715208),Gt=r(178243),$t=r(785716),Xt=r(751794),Kt=r(903297),Ht=r(537208),Vt=r(501819)},47249:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var o=r(990317),n=r(769842),a=r(269244);function i(e,t=!1){const r=t?o.i$:o.g0,i=r("%Y-%m-%d %H:%M:%S.%L"),s=r("%Y-%m-%d %H:%M:%S"),c=r("%Y-%m-%d %H:%M"),l=r("%Y-%m-%d %H:%M"),u=r("%Y-%m-%d"),d=r("%Y-%m-%d"),h=r("%Y"),{hasMillisecond:m,hasSecond:p,hasMinute:g,hasHour:f,isNotFirstDayOfMonth:y,isNotFirstMonth:v}=t?n.Z:n.b;let Z=h;return e.forEach((e=>{Z===h&&v(e)&&(Z=d),Z===d&&y(e)&&(Z=u),Z===u&&f(e)&&(Z=l),Z===l&&g(e)&&(Z=c),Z===c&&p(e)&&(Z=s),Z===s&&m(e)&&(Z=i)})),new a.Z({description:"Use the finest grain in an array of dates to format all dates in the array",formatFunc:Z,id:"finest_temporal_grain",label:"Format temporal columns with the finest grain",useLocalTime:t})}},450523:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});const o=()=>{var e;return null==(e=window.getSelection())?void 0:e.toString()}},332103:(e,t,r)=>{"use strict";r.d(t,{Kv:()=>s,T4:()=>c,Ul:()=>l,Z6:()=>i,ZU:()=>u}),r(667294);var o=r(568924),n=r(211965);const a=new o.FilterXSS({whiteList:{...(0,o.getDefaultWhiteList)(),span:["style","class","title"],div:["style","class"],a:["style","class","href","title","target"],img:["style","class","src","alt","title","width","height"],video:["autoplay","controls","loop","preload","src","height","width","muted"]},stripIgnoreTag:!0,css:!1});function i(e){return a.process(e)}function s(e){return Array.from((new DOMParser).parseFromString(e,"text/html").body.childNodes).some((({nodeType:e})=>1===e))}function c(e){return s(e)?i(e):e}function l(e){return s(e)?(0,n.tZ)("span",{className:"safe-html-wrapper",dangerouslySetInnerHTML:{__html:i(e)}}):e}function u(e){return e.replace(/<[^>]*>/g,"")}},170406:(e,t,r)=>{"use strict";r.d(t,{D:()=>a,b:()=>i});var o=r(236377),n=r.n(o);function a(e){return n()(e)}function i(){return n()("superset-ui")()}},126635:(e,t,r)=>{"use strict";r.d(t,{l:()=>o});const o=r(667294).memo},175042:()=>{}}]);
//# sourceMappingURL=e19b5f40a5878a76523b.chunk.js.map